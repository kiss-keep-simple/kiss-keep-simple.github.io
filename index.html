<head>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <button onclick="getData()">Get Data</button>&nbsp;
    <button onclick="copy()">Copy Data</button>
    <br><br>
    <textarea id="links" rows="200" cols="200"></textarea>
    <script>
        async function getData() {
            var links = document.getElementById("links").value.split("\n");
            document.getElementById("links").value = document.getElementById("links").value.replace("URL","QR");
            for (let i = 0; i < links.length; i++) {
                let link = links[i];
                if (link.indexOf("http") >= 0) {
                    link = "https://api.qrserver.com/v1/read-qr-code/?fileurl=" + encodeURIComponent(link);
                    console.log(link);
                    getLink(link);
                }

            }
        }

        function getLink(link) {
            axios.get(link)
                .then(function (response) {
                    // handle success
                    console.log(response.config.url);
                    var url = decodeURIComponent(response.config.url.replace("https://api.qrserver.com/v1/read-qr-code/?fileurl=", ""));
                    console.log(response.data[0].symbol[0].data);
                    document.getElementById("links").value = document.getElementById("links").value.replace(url, response.data[0].symbol[0].data)
                })
                .catch(function (error) {
                    // handle error
                    console.log(error);
                })

        }
  function copy() {
  // Get the text field
  var copyText = document.getElementById("links");

  // Select the text field
  copyText.select();
  copyText.setSelectionRange(0, 99999); // For mobile devices

   // Copy the text inside the text field
  navigator.clipboard.writeText(copyText.value);

  // Alert the copied text
  alert("Copied: " + copyText.value);
}
    </script>
</body>
